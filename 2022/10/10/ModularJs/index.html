<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>ModularJs - Undateable</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Undateable"><meta name="msapplication-TileImage" content="/img/logo1.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Undateable"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Modular Javascript - Javascript Tutorial on the Object Literal PatternModular Javascript																									  Cover how to build a basic module in javascript."><meta property="og:type" content="blog"><meta property="og:title" content="ModularJs"><meta property="og:url" content="http://example.com/2022/10/10/ModularJs/"><meta property="og:site_name" content="Undateable"><meta property="og:description" content="Modular Javascript - Javascript Tutorial on the Object Literal PatternModular Javascript																									  Cover how to build a basic module in javascript."><meta property="og:locale" content="en_US"><meta property="og:image" content="http://example.com/img/2.svg"><meta property="article:published_time" content="2022-10-10T02:34:26.000Z"><meta property="article:modified_time" content="2022-10-12T08:33:55.416Z"><meta property="article:author" content="Liny"><meta property="article:tag" content="JS"><meta property="article:tag" content="Modular"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/2.svg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2022/10/10/ModularJs/"},"headline":"ModularJs","image":[],"datePublished":"2022-10-10T02:34:26.000Z","dateModified":"2022-10-12T08:33:55.416Z","author":{"@type":"Person","name":"Liny"},"publisher":{"@type":"Organization","name":"Undateable","logo":{"@type":"ImageObject","url":"http://example.com/img/logo2.png"}},"description":"Modular Javascript - Javascript Tutorial on the Object Literal PatternModular Javascript\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  Cover how to build a basic module in javascript."}</script><link rel="canonical" href="http://example.com/2022/10/10/ModularJs/"><link rel="icon" href="/img/logo1.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo2.png" alt="Undateable" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/resume">Resume</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Liny777/Liny777.github.io"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/img/2.svg" alt="ModularJs"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-10-10T02:34:26.000Z" title="2022-10-10 10:34:26 ├F10: AM┤">2022-10-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-10-12T08:33:55.416Z" title="2022-10-12 4:33:55 ├F10: PM┤">2022-10-12</time></span><span class="level-item"><a class="link-muted" href="/categories/FrontEnd/">FrontEnd</a></span><span class="level-item">16 minutes read (About 2339 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">ModularJs</h1><div class="content"><blockquote>
<h3 id="Modular-Javascript-Javascript-Tutorial-on-the-Object-Literal-Pattern"><a href="#Modular-Javascript-Javascript-Tutorial-on-the-Object-Literal-Pattern" class="headerlink" title="Modular Javascript - Javascript Tutorial on the Object Literal Pattern"></a>Modular Javascript - Javascript Tutorial on the Object Literal Pattern</h3><p align=right><a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLoYCgNOIyGABs-wDaaxChu82q_xQgUb4f" title="Modular Javascript" style="text-decoration:none;">Modular Javascript</a></p>																									
</blockquote>
<p>Cover how to build a basic module in javascript.  </p>
<span id="more"></span>

<h3 id="1、Object-Literal"><a href="#1、Object-Literal" class="headerlink" title="1、Object-Literal"></a>1、Object-Literal</h3><p>The simplest pattern for modular javascript is the object literal pattern - it adds all values and methods on a single object, thus encapsulating all of the module’s function into one object.  The downside of this pattern, is it leaves all of the module’s data accessible.</p>
<p>Clean it up into a self-encapsulated module that is easy to work with.</p>
<p><strong>Self - Encapsulated</strong> : 将一个对象封装起来</p>
<p><strong>Efficient Dom Usage</strong> : 把需要操作的Dom元素进行缓存 - CacheDom function</p>
<p><strong>Render Method</strong> : 视频中是使用Mustache.render配合template进行渲染。</p>
<p><strong>Bind Events</strong> : 给Dom元素一并添加点击事件，将每个事件独立地写在外面，bindEvent只负责绑定。</p>
<p><strong>Delete Events</strong> : 记得写一个删除绑定，监听函数等的一个函数，避免内存泄漏。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> people = &#123;</span><br><span class="line">    <span class="attr">people</span>: [<span class="string">&#x27;Will&#x27;</span>, <span class="string">&#x27;Steve&#x27;</span>],</span><br><span class="line">    <span class="attr">init</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">cacheDom</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">bindEvents</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">render</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">cacheDom</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$el</span> = $(<span class="string">&#x27;#peopleModule&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$button</span> = <span class="variable language_">this</span>.<span class="property">$el</span>.<span class="title function_">find</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$input</span> = <span class="variable language_">this</span>.<span class="property">$el</span>.<span class="title function_">find</span>(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$ul</span> = <span class="variable language_">this</span>.<span class="property">$el</span>.<span class="title function_">find</span>(<span class="string">&#x27;ul&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">template</span> = <span class="variable language_">this</span>.<span class="property">$el</span>.<span class="title function_">find</span>(<span class="string">&#x27;#people-template&#x27;</span>).<span class="title function_">html</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">bindEvents</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$button</span>.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="variable language_">this</span>.<span class="property">addPerson</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>));</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$ul</span>.<span class="title function_">delegate</span>(<span class="string">&#x27;i.del&#x27;</span>, <span class="string">&#x27;click&#x27;</span>, <span class="variable language_">this</span>.<span class="property">deletePerson</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">render</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">var</span> data = &#123;</span><br><span class="line">           <span class="attr">people</span>: <span class="variable language_">this</span>.<span class="property">people</span>,</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">$ul</span>.<span class="title function_">html</span>(<span class="title class_">Mustache</span>.<span class="title function_">render</span>(<span class="variable language_">this</span>.<span class="property">template</span>, data));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">addPerson</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">people</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">$input</span>.<span class="title function_">val</span>());</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">render</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$input</span>.<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">deletePerson</span>: <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> $remove = $(event.<span class="property">target</span>).<span class="title function_">closest</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">        <span class="keyword">var</span> i = <span class="variable language_">this</span>.<span class="property">$ul</span>.<span class="title function_">find</span>(<span class="string">&#x27;li&#x27;</span>).<span class="title function_">index</span>($remove);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">people</span>.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">render</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">people.<span class="title function_">init</span>();</span><br></pre></td></tr></table></figure>

<p>但是上面这种写法有个缺点，可以直接在浏览器控制台去调用API直接操控对象元素。我们不想用户能够调用render、cacheDom等函数，只希望他们能够调用addPerson和DeletePerson，因此我们在给上面对象封装一层，只暴露出安全的想给用户用的接口。 </p>
<p>We write a revealing module pattern by starting with a self-executing anonymous function also known as an <strong>IIFE (immediately invoked function expression)</strong>. </p>
<p>This runs a function and sets it’s return value as our module’s value.  If we return an object of methods, then those methods are what other modules have “public” access to.  What’s nice about this, is we can create any variables within the function and no other modules have access to them unless we expose them via our return object.</p>
<p>方法：<code>(function()&#123;&#125;)()</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> people = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> people = [<span class="string">&#x27;Will&#x27;</span>, <span class="string">&#x27;Steve&#x27;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//cache DOM</span></span><br><span class="line">    <span class="keyword">var</span> $el = $(<span class="string">&#x27;#peopleModule&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> $button = $el.<span class="title function_">find</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> $input = $el.<span class="title function_">find</span>(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> $ul = $el.<span class="title function_">find</span>(<span class="string">&#x27;ul&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> template = $el.<span class="title function_">find</span>(<span class="string">&#x27;#people-template&#x27;</span>).<span class="title function_">html</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//bind events</span></span><br><span class="line">    $button.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, addPerson);</span><br><span class="line">    $ul.<span class="title function_">delegate</span>(<span class="string">&#x27;i.del&#x27;</span>, <span class="string">&#x27;click&#x27;</span>, deletePerson);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">_render</span>(); <span class="comment">// 代表私有变量</span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">_render</span>(<span class="params"></span>) &#123;</span><br><span class="line">       $ul.<span class="title function_">html</span>(<span class="title class_">Mustache</span>.<span class="title function_">render</span>(template, &#123;<span class="attr">people</span>: people&#125;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// Maybe String or index or other</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">addPerson</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> name = (<span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span>) ? value : $input.<span class="title function_">val</span>();</span><br><span class="line">        people.<span class="title function_">push</span>(name);</span><br><span class="line">        <span class="title function_">_render</span>();</span><br><span class="line">        $input.<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">deletePerson</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> i;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> event === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">            i = event;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> $remove = $(event.<span class="property">target</span>).<span class="title function_">closest</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">            i = $ul.<span class="title function_">find</span>(<span class="string">&#x27;li&#x27;</span>).<span class="title function_">index</span>($remove);</span><br><span class="line">        &#125;</span><br><span class="line">        people.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">        <span class="title function_">_render</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">addPerson</span>: addPerson,</span><br><span class="line">        <span class="attr">deletePerson</span>: deletePerson</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">//people.addPerson(&quot;Jake&quot;);</span></span><br><span class="line"><span class="comment">//people.deletePerson(0);</span></span><br></pre></td></tr></table></figure>

<p>给私有方法或变量加下划线</p>
<p>What kind of cool is we can keep these internal methods whatever we want to call them here’s very common thing is if something is private if it’s internal you’ll see an underscore there so let me find every where render is called and give it an underscore.<br>Unserscore usually means it is private where we’re storing this internally we’re never exposing.</p>
<h3 id="2、Pub-Sub"><a href="#2、Pub-Sub" class="headerlink" title="2、Pub - Sub"></a>2、Pub - Sub</h3><p>we’ll cover the pubsub design pattern (publish&#x2F;subscribe), which allows us to decouple our modules.  Once integrated with our pubsub module, they can emit events and not have to worry about which modules depend on them.  Modules can subscribe to events and be notified when any module publishes.</p>
<p>事件的格式是 <code>key:name(Listener) | value:[event1,event2,......]</code></p>
<p>This loose coupling will allow the application to grow significantly larger without encountering problems.</p>
<p>下面是两个模块整合在一起，但是彼此互不依赖，却可以实现一个更新另一个也更新，这就是Vue双向绑定的底层原理，逻辑层与视图层实时更新。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//events (publish subscribe) pattern</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> events = &#123;</span><br><span class="line">    <span class="attr">events</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">on</span>: <span class="keyword">function</span> (<span class="params">eventName, fn</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">events</span>[eventName] = <span class="variable language_">this</span>.<span class="property">events</span>[eventName] || [];</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">events</span>[eventName].<span class="title function_">push</span>(fn);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">off</span>: <span class="keyword">function</span>(<span class="params">eventName, fn</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">events</span>[eventName]) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">events</span>[eventName].<span class="property">length</span>; i++) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">events</span>[eventName][i] === fn) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">events</span>[eventName].<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">emit</span>: <span class="keyword">function</span> (<span class="params">eventName, data</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">events</span>[eventName]) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">events</span>[eventName].<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">          <span class="title function_">fn</span>(data);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Stats module</span></span><br><span class="line">  (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">var</span> people = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">//cache DOM</span></span><br><span class="line">      <span class="keyword">var</span> $stats = $(<span class="string">&#x27;#statsModule&#x27;</span>);</span><br><span class="line">      <span class="keyword">var</span> template = $(<span class="string">&#x27;#stats-template&#x27;</span>).<span class="title function_">html</span>();</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//bind events</span></span><br><span class="line">      events.<span class="title function_">on</span>(<span class="string">&#x27;peopleChanged&#x27;</span>, setPeople);</span><br><span class="line">      <span class="title function_">_render</span>();</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">_render</span>(<span class="params"></span>) &#123;</span><br><span class="line">         $stats.<span class="title function_">html</span>(<span class="title class_">Mustache</span>.<span class="title function_">render</span>(template, &#123;<span class="attr">people</span>: people&#125;));</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">setPeople</span>(<span class="params">newPeople</span>) &#123;</span><br><span class="line">          people = newPeople;</span><br><span class="line">          <span class="title function_">_render</span>();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">destroy</span>(<span class="params"></span>)&#123;</span><br><span class="line">        $stats.<span class="title function_">remove</span>();</span><br><span class="line">        events.<span class="title function_">off</span>(<span class="string">&#x27;peopleChanged&#x27;</span>,setPeople)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">destroy</span>: destroy</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//people module</span></span><br><span class="line">  (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">var</span> people = [<span class="string">&#x27;Will&#x27;</span>, <span class="string">&#x27;Steve&#x27;</span>];</span><br><span class="line">  </span><br><span class="line">      <span class="comment">//cache DOM</span></span><br><span class="line">      <span class="keyword">var</span> $el = $(<span class="string">&#x27;#peopleModule&#x27;</span>);</span><br><span class="line">      <span class="keyword">var</span> $button = $el.<span class="title function_">find</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">      <span class="keyword">var</span> $input = $el.<span class="title function_">find</span>(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">      <span class="keyword">var</span> $ul = $el.<span class="title function_">find</span>(<span class="string">&#x27;ul&#x27;</span>);</span><br><span class="line">      <span class="keyword">var</span> template = $el.<span class="title function_">find</span>(<span class="string">&#x27;#people-template&#x27;</span>).<span class="title function_">html</span>();</span><br><span class="line">  </span><br><span class="line">      <span class="comment">//bind events</span></span><br><span class="line">      $button.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, addPerson);</span><br><span class="line">      $ul.<span class="title function_">delegate</span>(<span class="string">&#x27;i.del&#x27;</span>, <span class="string">&#x27;click&#x27;</span>, deletePerson);</span><br><span class="line">  </span><br><span class="line">      <span class="title function_">_render</span>();</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">_render</span>(<span class="params"></span>) &#123;</span><br><span class="line">         $ul.<span class="title function_">html</span>(<span class="title class_">Mustache</span>.<span class="title function_">render</span>(template, &#123;<span class="attr">people</span>: people&#125;));</span><br><span class="line">         events.<span class="title function_">emit</span>(<span class="string">&quot;peopleChanged&quot;</span>, people.<span class="property">length</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">addPerson</span>(<span class="params">value</span>) &#123;</span><br><span class="line">          <span class="keyword">var</span> name = (<span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span>) ? value : $input.<span class="title function_">val</span>();</span><br><span class="line">          people.<span class="title function_">push</span>(name);</span><br><span class="line">          <span class="title function_">_render</span>();</span><br><span class="line">          $input.<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">deletePerson</span>(<span class="params">event</span>) &#123;</span><br><span class="line">          <span class="keyword">var</span> i;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> event === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">              i = event;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">var</span> $remove = $(event.<span class="property">target</span>).<span class="title function_">closest</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">              i = $ul.<span class="title function_">find</span>(<span class="string">&#x27;li&#x27;</span>).<span class="title function_">index</span>($remove);</span><br><span class="line">          &#125;</span><br><span class="line">          people.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">          <span class="title function_">_render</span>();</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &#125;)();</span><br></pre></td></tr></table></figure>

<h5 id="这里插播一下平时面试常考的发布订阅模式："><a href="#这里插播一下平时面试常考的发布订阅模式：" class="headerlink" title="这里插播一下平时面试常考的发布订阅模式："></a>这里插播一下平时面试常考的发布订阅模式：</h5><h4 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h4><ol>
<li>创建一个 <code>EventEmitter</code> 类</li>
<li>在该类上创建一个事件中心（Map）</li>
<li><code>on</code> 方法用来把函数 fn 都加到事件中心中（订阅者注册事件到调度中心）</li>
<li><code>emit</code> 方法取到 arguments 里第一个当做 event，根据 event 值去执行对应事件中心中的函数（发布者发布事件到调度中心，调度中心处理代码）</li>
<li><code>off</code> 方法可以根据 event 值取消订阅（取消订阅）</li>
<li><code>once</code> 方法只监听一次，调用完毕后删除缓存函数（订阅一次）</li>
<li>注册一个 <code>newListener</code> 用于监听新的事件订阅</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">EventEmitter</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_events</span> = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">on</span>(<span class="params">eventName, callback</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">_events</span>[eventName])&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">eventName</span> !== <span class="string">&quot;newListener&quot;</span>)&#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">emit</span>(<span class="string">&quot;newListener&quot;</span>, eventName)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> callbacks = <span class="variable language_">this</span>.<span class="property">_events</span>[eventName] || [];</span><br><span class="line">        callbacks.<span class="title function_">push</span>(callback);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_events</span>[eventName] = callbacks</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">emit</span>(<span class="params">eventName, ...args</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> callbacks = <span class="variable language_">this</span>.<span class="property">_events</span>[eventName] || [];</span><br><span class="line">        callbacks.<span class="title function_">forEach</span>(<span class="function"><span class="params">cb</span> =&gt;</span> <span class="title function_">cb</span>(...args))</span><br><span class="line">    &#125;</span><br><span class="line">		<span class="comment">// 其中once部分可以进行修改，是阿里二面的时候一位哥告诉我的, 传入callback时，传入一个匿名函数，然后里面分别先执行callback再调用off进行销毁～</span></span><br><span class="line">    <span class="title function_">once</span>(<span class="params">eventName, callback</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">one</span> = (<span class="params">...args</span>)=&gt;&#123;</span><br><span class="line">            <span class="title function_">callback</span>(...args)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">off</span>(eventName, one)</span><br><span class="line">        &#125;</span><br><span class="line">        one.<span class="property">initialCallback</span> = callback;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">on</span>(eventName, one)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="title function_">off</span>(<span class="params">eventName, callback</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> callbacks = <span class="variable language_">this</span>.<span class="property">_events</span>[eventName] || []</span><br><span class="line">        <span class="keyword">const</span> newCallbacks = callbacks.<span class="title function_">filter</span>(<span class="function"><span class="params">fn</span> =&gt;</span> fn != callback &amp;&amp; fn.<span class="property">initialCallback</span> != callback <span class="comment">/* 用于once的取消订阅 */</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_events</span>[eventName] = newCallbacks;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3、Prototypal-Pattern-vs-Classical-OOP-in-JS"><a href="#3、Prototypal-Pattern-vs-Classical-OOP-in-JS" class="headerlink" title="3、Prototypal Pattern vs Classical OOP in JS"></a>3、Prototypal Pattern vs Classical OOP in JS</h3><p>两种方法都可以实现继承，但是第二种会更简洁。</p>
<h4 id="3-1-Classical-OOP"><a href="#3-1-Classical-OOP" class="headerlink" title="3.1 Classical OOP"></a>3.1 Classical OOP</h4><p>Here’s the link to the “inherit” function I use here: <a target="_blank" rel="noopener" href="https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqbmdUUGdiMG0wSkdNZWVkdnRXTGxHampMN0lJUXxBQ3Jtc0ttanUtdFhoeFlfQ1NmUUg5Zm9Vdkl4bXFyaDdNZXJFSUtoNGlyUUI0ZG5SZEFtRFZibFFUYXJsX1F1Zm1MWV9xTUhmRDg5UEpkMGVLdFl6WmNidFlSODMwbG8teFVwdXdBLVp2V0lManFEMVhrMGVuaw&q=https://github.com/nodejs/node-v0.x-archive/blob/master/lib/util.js%23L634-L644&v=sWOXYDBbz0g">https://github.com/nodejs/node-v0.x-a...</a> Using a constructor, a prototoype, and the “new” keyword, we can create multiple copies or “instances” of a module, each with unique properties, but shared functionality. We can also implement inheritance in Javascript.  If we create a new module, we can inherit the functionality of a parent module with a simple inheritance helper function.</p>
<p>跟Java继承一个意思撒～</p>
<p>有一个点注意一下：</p>
<p><code>Friend.super_.call(this, name); </code></p>
<p>这里其实和Java抽象有点像，为了使得父子的共同属性保持一致变化，所以需要把name的this从子指向父。这样父亲name的变化，子的name也会跟着变化。（<strong>把共同属性的this指向父亲</strong>）</p>
<p>如果子类要拓展自己的方法，用如下写法：</p>
<p><code>Musician.prototype.shoutName = function() &#123; console.log(&quot;DUDE!!!&quot;) &#125;</code></p>
<p>删除的时候，如下，使用delete API：</p>
<p><code>delete Musician.prototype.shoutName</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// /**</span></span><br><span class="line"><span class="comment">//  * Inherit the prototype methods from one constructor into another.</span></span><br><span class="line"><span class="comment">//  *</span></span><br><span class="line"><span class="comment">//  * The Function.prototype.inherits from lang.js rewritten as a standalone</span></span><br><span class="line"><span class="comment">//  * function (not on Function.prototype). <span class="doctag">NOTE:</span> If this file is to be loaded</span></span><br><span class="line"><span class="comment">//  * during bootstrapping this function needs to be rewritten using some native</span></span><br><span class="line"><span class="comment">//  * functions as prototype setup using normal JavaScript does not work as</span></span><br><span class="line"><span class="comment">//  * expected during bootstrapping (see mirror.js in r114903).</span></span><br><span class="line"><span class="comment">//  *</span></span><br><span class="line"><span class="comment">//  * @param &#123;function&#125; ctor Constructor function which needs to inherit the</span></span><br><span class="line"><span class="comment">//  *     prototype.</span></span><br><span class="line"><span class="comment">//  * @param &#123;function&#125; superCtor Constructor function to inherit prototype from.</span></span><br><span class="line"><span class="comment">//  */</span></span><br><span class="line"><span class="comment">//  exports.inherits = function(ctor, superCtor) &#123;</span></span><br><span class="line"><span class="comment">//     ctor.super_ = superCtor;</span></span><br><span class="line"><span class="comment">//     ctor.prototype = Object.create(superCtor.prototype, &#123;</span></span><br><span class="line"><span class="comment">//       constructor: &#123;</span></span><br><span class="line"><span class="comment">//         value: ctor,</span></span><br><span class="line"><span class="comment">//         enumerable: false,</span></span><br><span class="line"><span class="comment">//         writable: true,</span></span><br><span class="line"><span class="comment">//         configurable: true</span></span><br><span class="line"><span class="comment">//       &#125;</span></span><br><span class="line"><span class="comment">//     &#125;);</span></span><br><span class="line"><span class="comment">//   &#125;;</span></span><br><span class="line"><span class="comment">// classical prototypal</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">inherites</span>(<span class="params">ctor, superCtor</span>) &#123;</span><br><span class="line">    ctor.<span class="property">super_</span> = superCtor;</span><br><span class="line">    ctor.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(superCtor.<span class="property"><span class="keyword">prototype</span></span>, &#123;</span><br><span class="line">        <span class="attr">constructor</span>: &#123;</span><br><span class="line">            <span class="attr">value</span>: ctor,</span><br><span class="line">            <span class="attr">enumerable</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">configurable</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Person</span> = <span class="keyword">function</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">shoutName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;!&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> john = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="keyword">var</span> bobby = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Friend</span> = <span class="keyword">function</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="comment">// Person.call(this,name)</span></span><br><span class="line">    <span class="title class_">Friend</span>.<span class="property">super_</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">inherities</span>(<span class="title class_">Friend</span>, <span class="title class_">Person</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> julia = <span class="keyword">new</span> <span class="title class_">Friend</span>(<span class="string">&quot;julia&quot;</span>);</span><br><span class="line">julia.<span class="title function_">sayName</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Musician</span> = <span class="keyword">function</span>(<span class="params">name, instrument</span>) &#123;</span><br><span class="line">    <span class="title class_">Musician</span>.<span class="property">super_</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">instrument</span> = instrument;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Musician</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">shoutName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;DUDE!!!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">inherites</span>(<span class="title class_">Musician</span>, <span class="title class_">Person</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Musician</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getInstrument</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">instrument</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Jason</span> = <span class="keyword">new</span> <span class="title class_">Musician</span>(<span class="string">&quot;Jason&quot;</span>, <span class="string">&quot;trombone&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="title class_">Musician</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">shoutName</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The delete operator in JavaScript is used to delete an object&#x27;s property. </span></span><br><span class="line"><span class="comment"> * If it is used to delete an object property that already exists, </span></span><br><span class="line"><span class="comment"> * it returns true and removes the property from the object.</span></span><br><span class="line"><span class="comment"> * However, deleting an object property that doesn&#x27;t exist will not affect the object, but will still return true .</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-Prototypal-Pattern"><a href="#3-2-Prototypal-Pattern" class="headerlink" title="3.2 Prototypal Pattern"></a>3.2 Prototypal Pattern</h4><p>While many JS devs still use classical OOP, many have switched to the prototypal pattern for Module Inheritance and Instantiation.  Here’s the prototypal pattern for JS and why some devs find it simpler to use.</p>
<p>Basically, when coding JS OOP with the prototypal pattern, <strong>everything is an object</strong>.  You start with an object literal and, then, to inherit from it, you use Object.create(someModule) to create a child that inherits from it. </p>
<p><code>var parent = &#123;some: method&#125;; </code></p>
<p><code>var child = Object.create(parent); </code></p>
<p><code>//now add new methods to the child </code></p>
<p><code>child.newMethod = someMethod;</code></p>
<p>So there’s really no difference between inheritance and instantiation in the prototypal method.  To create multiple children, simply:</p>
<p><code>var child1 = Object.create(parent); </code></p>
<p><code>var child2 = Object.create(parent);</code></p>
<p>And there you have it!  Also see the source javascript code on how to include a create method so creating is a little more seamless.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// classical prototypal</span></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * Define : </span></span><br><span class="line"><span class="comment"> * Object.create() method is used to create a new object with the specified prototype object and prototypes.</span></span><br><span class="line"><span class="comment"> * Object.create() method returns a new object with the specified prototype object and properties.</span></span><br><span class="line"><span class="comment"> * Application :</span></span><br><span class="line"><span class="comment"> * Object.create() is used for implementing inheritance.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> human = &#123;</span><br><span class="line">    <span class="attr">species</span>: <span class="string">&quot;human&quot;</span>,</span><br><span class="line">    <span class="comment">// Rewrite Object.create function</span></span><br><span class="line">    <span class="attr">create</span>: <span class="keyword">function</span>(<span class="params">values</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> instance = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="variable language_">this</span>);</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">keys</span>(values).<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">keys</span>) &#123;</span><br><span class="line">            instance[keys] = values[keys];</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">saySpecies</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">species</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">sayName</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> musician = <span class="title class_">Object</span>.<span class="title function_">create</span>(human); <span class="comment">// inherited human</span></span><br><span class="line">musician.<span class="property">playInstrument</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;plays...&quot;</span> + <span class="variable language_">this</span>.<span class="property">instrument</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> will = <span class="title class_">Object</span>.<span class="title function_">create</span>(musician); <span class="comment">// inherited musician - &gt; human </span></span><br><span class="line">will.<span class="property">name</span> = <span class="string">&quot;Will&quot;</span>;</span><br><span class="line">will.<span class="property">instrument</span> = <span class="string">&quot;Drums&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> musician2 = human.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">species</span>: <span class="string">&quot;musician&quot;</span>,</span><br><span class="line">    <span class="attr">playInstrument</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;plays&quot;</span>+<span class="variable language_">this</span>.<span class="property">instrument</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>[1]: <a target="_blank" rel="noopener" href="https://www.youtube.com/c/learncodeacademy">https://www.youtube.com/c/learncodeacademy</a>	“Youtuber Learncode.academy”<br>[2]: <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904101331877895">https://juejin.cn/post/6844904101331877895</a>	“从发布订阅模式入手读懂Node.js的EventEmitter源码”<br>[3]: <a target="_blank" rel="noopener" href="https://juejin.cn/post/6985156199192723487">https://juejin.cn/post/6985156199192723487</a>	“手写一个基于发布订阅模式的js事件处理中心(EventEmitter)”</p>
<p>[4]: <a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLoYCgNOIyGABs-wDaaxChu82q_xQgUb4f">https://www.youtube.com/playlist?list=PLoYCgNOIyGABs-wDaaxChu82q_xQgUb4f</a>	“Modular Javascript”</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>ModularJs</p><p><a href="http://example.com/2022/10/10/ModularJs/">http://example.com/2022/10/10/ModularJs/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Liny</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2022-10-10</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2022-10-12</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/JS/">JS</a><a class="link-muted mr-2" rel="tag" href="/tags/Modular/">Modular</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://www.buymeacoffee.com/1093742432A" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/10/12/Vue-Relation/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Vue Feature</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/10/08/String/"><span class="level-item">Java Basics</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "3f1efafe31b40745ef350d82e2a3deb1",
            repo: "NewBlogComments",
            owner: "Liny777",
            clientID: "c215c3a16d68cf01d606",
            clientSecret: "056d890e249979b3eaabf0777d9780624b3d66d7",
            admin: ["Liny777"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Modular-Javascript-Javascript-Tutorial-on-the-Object-Literal-Pattern"><span class="level-left"><span class="level-item">1</span><span class="level-item">Modular Javascript - Javascript Tutorial on the Object Literal Pattern</span></span></a></li><li><a class="level is-mobile" href="#1、Object-Literal"><span class="level-left"><span class="level-item">2</span><span class="level-item">1、Object-Literal</span></span></a></li><li><a class="level is-mobile" href="#2、Pub-Sub"><span class="level-left"><span class="level-item">3</span><span class="level-item">2、Pub - Sub</span></span></a><ul class="menu-list"><ul class="menu-list"><li><a class="level is-mobile" href="#这里插播一下平时面试常考的发布订阅模式："><span class="level-left"><span class="level-item">3.1.1</span><span class="level-item">这里插播一下平时面试常考的发布订阅模式：</span></span></a></li></ul><li><a class="level is-mobile" href="#实现思路"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">实现思路</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3、Prototypal-Pattern-vs-Classical-OOP-in-JS"><span class="level-left"><span class="level-item">4</span><span class="level-item">3、Prototypal Pattern vs Classical OOP in JS</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-1-Classical-OOP"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">3.1 Classical OOP</span></span></a></li><li><a class="level is-mobile" href="#3-2-Prototypal-Pattern"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">3.2 Prototypal Pattern</span></span></a></li></ul></li><li><a class="level is-mobile" href="#其他"><span class="level-left"><span class="level-item">5</span><span class="level-item">其他</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo2.png" alt="Undateable" height="28"></a><p class="is-size-7"><span>&copy; 2022 Liny</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Liny777"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>